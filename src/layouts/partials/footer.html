
<!-- Dynamic copyright date -->

<script>
  const copyrightDate = new Date().getFullYear();
  document.getElementById('copyYear').innerHTML = copyrightDate;
</script>


<!-- JavaScript Bundle with Popper, needed for Bootstrap -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "c9ohlhyxzf");
</script>

<!-- Google Tag Manager -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q3M5LVH76F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-Q3M5LVH76F');
  </script>

<!-- Reddit Tracking -->

  <script>
    rdt('track', 'SignUp');
    rdt('track', 'ViewContent');
  </script>

<!-- Script for toasts that pops up when clicking the copy button on package details pages -->

  <script>
    const toastTrigger = document.getElementById('liveToastBtn')
    const toastLiveExample = document.getElementById('liveToast')
    if (toastTrigger) {
      toastTrigger.addEventListener('click', () => {
        const toast = new bootstrap.Toast(toastLiveExample)

        toast.show()
      })
    }
  </script>

<!-- Fetches Stargazers and Release number from GitHub -->

  <script>
    $(document).ready(function() {
      var repository = "teaxyz/cli";
      var urlRepo = "https://api.github.com/repos/" + repository;
      var urlRelease = "https://api.github.com/repos/" + repository + "/releases/latest";
      var token = "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";
      // Check if the data is already stored in local storage
      var dataRepo = JSON.parse(localStorage.getItem('dataRepo'));
      var dataRelease = JSON.parse(localStorage.getItem('dataRelease'));
      if (dataRepo && dataRelease) {
        // If the data is already stored, use it to update the page
        var stargazers = "(" + numeral(dataRepo.stargazers_count).format("0.0a") + ")";
        var release = dataRelease.tag_name;
        $(".stargazers").html(stargazers).hide().fadeIn(400);
        $(".release").html(release).hide().fadeIn(400);
      } else {
        // If the data is not stored, make the API requests
        $.when(
          $.ajax({
            url: urlRepo,
            headers: {
              "Authorization": "token " + token
            },
          }),
          $.ajax({
            url: urlRelease,
            headers: {
              "Authorization": "token " + token
            },
          })
        ).done(function(dataRepo, dataRelease) {
          // Store the response data in local storage
          localStorage.setItem('dataRepo', JSON.stringify(dataRepo[0]));
          localStorage.setItem('dataRelease', JSON.stringify(dataRelease[0]));
          // Update the page with the response data
          var stargazers = "(" + numeral(JSON.parse(localStorage.getItem('dataRepo')).stargazers_count).format("0.0a") + ")";
          var release = JSON.parse(localStorage.getItem('dataRelease')).tag_name;
          $(".stargazers").html(stargazers).hide().fadeIn(400);
          $(".release").html(release).hide().fadeIn(400);
          // Reserve the space for the stargazers element
          var stargazersWidth = $(".stargazers").width();
          $(".content").css("min-width", stargazersWidth);
        });
      }
    });
  </script>
